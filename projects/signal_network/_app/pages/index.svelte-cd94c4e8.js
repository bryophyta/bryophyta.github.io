import{S as wt,i as mt,s as bt,e as p,t as C,c as w,a as m,g as T,d as f,b as s,f as R,H as u,h as tt,I as _e,J as ke,k as I,K as Ee,n as M,L as se,x as G,u as Q,w as De,M as _t,N as ne,O as ge,P as pe,Q as Rt,r as ze,j as Ve,m as Ue,o as Ge,v as qe}from"../chunks/vendor-7451c793.js";function Bt(r){let e,t,l,c;return{c(){e=p("span"),t=C(r[1]),this.h()},l(n){e=w(n,"SPAN",{role:!0,"aria-label":!0,"aria-hidden":!0,class:!0});var a=m(e);t=T(a,r[1]),a.forEach(f),this.h()},h(){s(e,"role","img"),s(e,"aria-label",l=r[0]?r[0]:""),s(e,"aria-hidden",c=r[0]?"false":"true"),s(e,"class","shaker svelte-1nddn89")},m(n,a){R(n,e,a),u(e,t)},p(n,[a]){a&2&&tt(t,n[1]),a&1&&l!==(l=n[0]?n[0]:"")&&s(e,"aria-label",l),a&1&&c!==(c=n[0]?"false":"true")&&s(e,"aria-hidden",c)},i:_e,o:_e,d(n){n&&f(e)}}}function Ot(r,e,t){let{label:l}=e,{symbol:c}=e;return r.$$set=n=>{"label"in n&&t(0,l=n.label),"symbol"in n&&t(1,c=n.symbol)},[l,c]}class We extends wt{constructor(e){super();mt(this,e,Ot,Bt,bt,{label:0,symbol:1})}}function vt(r,e,t){const l=r.slice();return l[29]=e[t],l}function yt(r,e,t){const l=r.slice();return l[32]=e[t],l}function jt(r){let e,t,l,c,n,a,o;return e=new We({props:{symbol:"\u{1F62C}",label:"grimace"}}),{c(){Ve(e.$$.fragment),t=I(),l=p("span"),c=C(`...okay that's about the limit for now, 
						we're already at `),n=C(r[10]),a=C(" unique strategies!"),this.h()},l(i){Ue(e.$$.fragment,i),t=M(i),l=w(i,"SPAN",{style:!0,class:!0});var h=m(l);c=T(h,`...okay that's about the limit for now, 
						we're already at `),n=T(h,r[10]),a=T(h," unique strategies!"),h.forEach(f),this.h()},h(){ne(l,"font-size","1rem"),s(l,"class","svelte-8fwnwn")},m(i,h){Ge(e,i,h),R(i,t,h),R(i,l,h),u(l,c),u(l,n),u(l,a),o=!0},p(i,h){(!o||h[0]&1024)&&tt(n,i[10])},i(i){o||(G(e.$$.fragment,i),o=!0)},o(i){Q(e.$$.fragment,i),o=!1},d(i){qe(e,i),i&&f(t),i&&f(l)}}}function Lt(r){let e,t;return e=new We({props:{symbol:"\u{1F914}",label:"thinking face"}}),{c(){Ve(e.$$.fragment)},l(l){Ue(e.$$.fragment,l)},m(l,c){Ge(e,l,c),t=!0},p:_e,i(l){t||(G(e.$$.fragment,l),t=!0)},o(l){Q(e.$$.fragment,l),t=!1},d(l){qe(e,l)}}}function Dt(r){let e,t;return e=new We({props:{symbol:"\u{1F600}",label:"smile"}}),{c(){Ve(e.$$.fragment)},l(l){Ue(e.$$.fragment,l)},m(l,c){Ge(e,l,c),t=!0},p:_e,i(l){t||(G(e.$$.fragment,l),t=!0)},o(l){Q(e.$$.fragment,l),t=!1},d(l){qe(e,l)}}}function zt(r){let e,t,l,c,n;return{c(){e=ke("svg"),t=ke("path"),l=I(),c=p("span"),n=C("Pause"),this.h()},l(a){e=Ee(a,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var o=m(e);t=Ee(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0,class:!0}),m(t).forEach(f),o.forEach(f),l=M(a),c=w(a,"SPAN",{class:!0});var i=m(c);n=T(i,"Pause"),i.forEach(f),this.h()},h(){s(t,"fill-rule","evenodd"),s(t,"d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z"),s(t,"clip-rule","evenodd"),s(t,"class","svelte-8fwnwn"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"class","button-icon svelte-8fwnwn"),s(e,"viewBox","0 0 20 20"),s(e,"fill","currentColor"),s(c,"class","sr-only svelte-8fwnwn")},m(a,o){R(a,e,o),u(e,t),R(a,l,o),R(a,c,o),u(c,n)},d(a){a&&f(e),a&&f(l),a&&f(c)}}}function Vt(r){let e,t,l,c,n;return{c(){e=ke("svg"),t=ke("path"),l=I(),c=p("span"),n=C("Play"),this.h()},l(a){e=Ee(a,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var o=m(e);t=Ee(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0,class:!0}),m(t).forEach(f),o.forEach(f),l=M(a),c=w(a,"SPAN",{class:!0});var i=m(c);n=T(i,"Play"),i.forEach(f),this.h()},h(){s(t,"fill-rule","evenodd"),s(t,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"),s(t,"clip-rule","evenodd"),s(t,"class","svelte-8fwnwn"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"class","button-icon svelte-8fwnwn"),s(e,"viewBox","0 0 20 20"),s(e,"fill","currentColor"),s(c,"class","sr-only svelte-8fwnwn")},m(a,o){R(a,e,o),u(e,t),R(a,l,o),R(a,c,o),u(c,n)},d(a){a&&f(e),a&&f(l),a&&f(c)}}}function kt(r){let e,t,l,c,n,a,o,i;return{c(){e=p("button"),t=ke("svg"),l=ke("path"),c=I(),n=p("span"),a=C("Reset"),this.h()},l(h){e=w(h,"BUTTON",{class:!0});var N=m(e);t=Ee(N,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var q=m(t);l=Ee(q,"path",{"fill-rule":!0,d:!0,"clip-rule":!0,class:!0}),m(l).forEach(f),q.forEach(f),c=M(N),n=w(N,"SPAN",{class:!0});var W=m(n);a=T(W,"Reset"),W.forEach(f),N.forEach(f),this.h()},h(){s(l,"fill-rule","evenodd"),s(l,"d","M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"),s(l,"clip-rule","evenodd"),s(l,"class","svelte-8fwnwn"),s(t,"xmlns","http://www.w3.org/2000/svg"),s(t,"class","button-icon svelte-8fwnwn"),s(t,"viewBox","0 0 20 20"),s(t,"fill","currentColor"),s(n,"class","sr-only svelte-8fwnwn"),s(e,"class","svelte-8fwnwn")},m(h,N){R(h,e,N),u(e,t),u(t,l),u(e,c),u(e,n),u(n,a),o||(i=se(e,"click",r[13]),o=!0)},p:_e,d(h){h&&f(e),o=!1,i()}}}function Ut(r){let e;return{c(){e=p("div"),this.h()},l(t){e=w(t,"DIV",{style:!0,class:!0}),m(e).forEach(f),this.h()},h(){ne(e,"width","100%"),ne(e,"height","100%"),ne(e,"background-color",r[9][r[32].strategies]),ne(e,"opacity","0.5"),ne(e,"border-radius","50%"),ne(e,"padding-bottom","100%"),s(e,"class","svelte-8fwnwn")},m(t,l){R(t,e,l)},p(t,l){l[0]&544&&ne(e,"background-color",t[9][t[32].strategies])},i:_e,o:_e,d(t){t&&f(e)}}}function Gt(r){let e,t;return e=new We({props:{symbol:r[11](r[32].strategies).symbol,label:r[11](r[32].strategies).label}}),{c(){Ve(e.$$.fragment)},l(l){Ue(e.$$.fragment,l)},m(l,c){Ge(e,l,c),t=!0},p(l,c){const n={};c[0]&32&&(n.symbol=l[11](l[32].strategies).symbol),c[0]&32&&(n.label=l[11](l[32].strategies).label),e.$set(n)},i(l){t||(G(e.$$.fragment,l),t=!0)},o(l){Q(e.$$.fragment,l),t=!1},d(l){qe(e,l)}}}function Et(r){let e,t,l,c;const n=[Gt,Ut],a=[];function o(i,h){return i[4].strategies.length<=16?0:1}return t=o(r),l=a[t]=n[t](r),{c(){e=p("td"),l.c(),this.h()},l(i){e=w(i,"TD",{class:!0});var h=m(e);l.l(h),h.forEach(f),this.h()},h(){s(e,"class","svelte-8fwnwn")},m(i,h){R(i,e,h),a[t].m(e,null),c=!0},p(i,h){let N=t;t=o(i),t===N?a[t].p(i,h):(ze(),Q(a[N],1,1,()=>{a[N]=null}),De(),l=a[t],l?l.p(i,h):(l=a[t]=n[t](i),l.c()),G(l,1),l.m(e,null))},i(i){c||(G(l),c=!0)},o(i){Q(l),c=!1},d(i){i&&f(e),a[t].d()}}}function Nt(r){let e,t,l,c=r[29],n=[];for(let o=0;o<c.length;o+=1)n[o]=Et(yt(r,c,o));const a=o=>Q(n[o],1,1,()=>{n[o]=null});return{c(){e=p("tr");for(let o=0;o<n.length;o+=1)n[o].c();t=I(),this.h()},l(o){e=w(o,"TR",{class:!0});var i=m(e);for(let h=0;h<n.length;h+=1)n[h].l(i);t=M(i),i.forEach(f),this.h()},h(){s(e,"class","svelte-8fwnwn")},m(o,i){R(o,e,i);for(let h=0;h<n.length;h+=1)n[h].m(e,null);u(e,t),l=!0},p(o,i){if(i[0]&2608){c=o[29];let h;for(h=0;h<c.length;h+=1){const N=yt(o,c,h);n[h]?(n[h].p(N,i),G(n[h],1)):(n[h]=Et(N),n[h].c(),G(n[h],1),n[h].m(e,t))}for(ze(),h=c.length;h<n.length;h+=1)a(h);De()}},i(o){if(!l){for(let i=0;i<c.length;i+=1)G(n[i]);l=!0}},o(o){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)Q(n[i]);l=!1},d(o){o&&f(e),_t(n,o)}}}function St(r){let e,t,l,c,n;return{c(){e=p("div"),t=p("div"),l=p("div"),c=p("div"),n=p("div"),this.h()},l(a){e=w(a,"DIV",{class:!0});var o=m(e);t=w(o,"DIV",{class:!0}),m(t).forEach(f),l=w(o,"DIV",{class:!0}),m(l).forEach(f),c=w(o,"DIV",{class:!0}),m(c).forEach(f),n=w(o,"DIV",{class:!0}),m(n).forEach(f),o.forEach(f),this.h()},h(){s(t,"class","svelte-8fwnwn"),s(l,"class","svelte-8fwnwn"),s(c,"class","svelte-8fwnwn"),s(n,"class","svelte-8fwnwn"),s(e,"class","lds-ring svelte-8fwnwn")},m(a,o){R(a,e,o),u(e,t),u(e,l),u(e,c),u(e,n)},d(a){a&&f(e)}}}function qt(r){let e,t,l,c,n,a,o,i,h,N,q,W,z,L,re,V,he,A,ae,Ne,ve,$,K,Se,Ce,U,Te,x,oe,Ie,Me,y,b,g,v,H,Y,_,B,P,ie,X,Z,He,O,Ye,Ae,Je,we,Ke,Xe,J,Ze,fe,Qe,Fe,ue,me,$e,ye,xe,lt;const st=[Dt,Lt,jt],de=[];function nt(d,k){return d[10]<=3e4?0:d[10]<=6e4?1:2}X=nt(r),Z=de[X]=st[X](r);function rt(d,k){return d[6]?zt:Vt}let Pe=rt(r),ce=Pe(r),j=!r[6]&&kt(r),be=r[5],S=[];for(let d=0;d<be.length;d+=1)S[d]=Nt(vt(r,be,d));const Pt=d=>Q(S[d],1,1,()=>{S[d]=null});let D=r[2]&&St();return{c(){e=p("header"),t=p("h1"),l=C("Signal learning on a network"),c=I(),n=p("main"),a=p("details"),o=p("summary"),i=C(`Modelled after Kevin J. S. Zollman (2005)
			`),h=p("a"),N=C("Talking to Neighbors: The Evolution of Regional Meaning"),q=C("."),W=C(`
		The table below illustrates the evolution of signalling strategies in a network.
		`),z=p("br"),L=C(`
		The classic Lewis signalling game has two players. One can see some state of the world (e.g. a bird
		who sees a predator) and can send a signal (e.g. a warning call). The other can hear the call and
		take action. Both of the parties 'win' if the action is appropriate to the state of the world. Imagine
		there are two kinds of predator -- a hawk and a cat -- and you want to know whether to hide low or
		high. Different calls could tell you which kind of predator is coming, but how can you match a given
		call to a given kind of predator?
		`),re=p("br"),V=C(`
		If you have two kinds of call, either could mean 'high' or 'low' equally well. The challenge is to
		make sure that both parties know which is which. In this simulation, each player starts with a random
		strategy for sending and receiving signals. In each round, each player plays each of their neighbours
		twice, once as 'sender' and once as 'receiver'. At the end of the round, each player looks at their
		immediate neighbours and employs a very simple learning rule: they copy the most successful neighbour's
		strategy. There are 16 possible strategies to start with, but only two which reliably allow coordination.
		When a pocket of players adopts one of these strategies, they will do well by being able to 'talk'
		to each other, and their neighbours will copy from their success. With time, we tend to see a few
		clusters forming with their own 'dialects'.`),he=I(),A=p("details"),ae=p("summary"),Ne=C("Settings"),ve=I(),$=p("p"),K=p("label"),Se=C("Grid width:"),Ce=I(),U=p("input"),Te=I(),x=p("p"),oe=p("label"),Ie=C("Number of state-types:"),Me=I(),y=p("input"),b=I(),g=p("p"),v=p("label"),H=C("Number of action-types:"),Y=I(),_=p("input"),B=I(),P=p("p"),ie=p("span"),Z.c(),He=I(),O=p("section"),Ye=C("Round "),Ae=C(r[8]),Je=C(` /
		`),we=p("label"),Ke=C("Total rounds"),Xe=I(),J=p("input"),Ze=I(),fe=p("button"),ce.c(),Qe=I(),j&&j.c(),Fe=I(),ue=p("section"),me=p("table");for(let d=0;d<S.length;d+=1)S[d].c();$e=I(),D&&D.c(),this.h()},l(d){e=w(d,"HEADER",{class:!0});var k=m(e);t=w(k,"H1",{class:!0});var ee=m(t);l=T(ee,"Signal learning on a network"),ee.forEach(f),k.forEach(f),c=M(d),n=w(d,"MAIN",{class:!0});var E=m(n);a=w(E,"DETAILS",{class:!0});var te=m(a);o=w(te,"SUMMARY",{class:!0});var Re=m(o);i=T(Re,`Modelled after Kevin J. S. Zollman (2005)
			`),h=w(Re,"A",{href:!0,target:!0,rel:!0,class:!0});var at=m(h);N=T(at,"Talking to Neighbors: The Evolution of Regional Meaning"),at.forEach(f),q=T(Re,"."),Re.forEach(f),W=T(te,`
		The table below illustrates the evolution of signalling strategies in a network.
		`),z=w(te,"BR",{class:!0}),L=T(te,`
		The classic Lewis signalling game has two players. One can see some state of the world (e.g. a bird
		who sees a predator) and can send a signal (e.g. a warning call). The other can hear the call and
		take action. Both of the parties 'win' if the action is appropriate to the state of the world. Imagine
		there are two kinds of predator -- a hawk and a cat -- and you want to know whether to hide low or
		high. Different calls could tell you which kind of predator is coming, but how can you match a given
		call to a given kind of predator?
		`),re=w(te,"BR",{class:!0}),V=T(te,`
		If you have two kinds of call, either could mean 'high' or 'low' equally well. The challenge is to
		make sure that both parties know which is which. In this simulation, each player starts with a random
		strategy for sending and receiving signals. In each round, each player plays each of their neighbours
		twice, once as 'sender' and once as 'receiver'. At the end of the round, each player looks at their
		immediate neighbours and employs a very simple learning rule: they copy the most successful neighbour's
		strategy. There are 16 possible strategies to start with, but only two which reliably allow coordination.
		When a pocket of players adopts one of these strategies, they will do well by being able to 'talk'
		to each other, and their neighbours will copy from their success. With time, we tend to see a few
		clusters forming with their own 'dialects'.`),te.forEach(f),he=M(E),A=w(E,"DETAILS",{class:!0});var le=m(A);ae=w(le,"SUMMARY",{class:!0});var ot=m(ae);Ne=T(ot,"Settings"),ot.forEach(f),ve=M(le),$=w(le,"P",{class:!0});var Be=m($);K=w(Be,"LABEL",{for:!0,class:!0});var it=m(K);Se=T(it,"Grid width:"),it.forEach(f),Ce=M(Be),U=w(Be,"INPUT",{id:!0,type:!0,max:!0,class:!0}),Be.forEach(f),Te=M(le),x=w(le,"P",{class:!0});var Oe=m(x);oe=w(Oe,"LABEL",{for:!0,class:!0});var ut=m(oe);Ie=T(ut,"Number of state-types:"),ut.forEach(f),Me=M(Oe),y=w(Oe,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),Oe.forEach(f),b=M(le),g=w(le,"P",{class:!0});var je=m(g);v=w(je,"LABEL",{for:!0,class:!0});var ct=m(v);H=T(ct,"Number of action-types:"),ct.forEach(f),Y=M(je),_=w(je,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),je.forEach(f),B=M(le),P=w(le,"P",{class:!0});var ht=m(P);ie=w(ht,"SPAN",{style:!0,class:!0});var ft=m(ie);Z.l(ft),ft.forEach(f),ht.forEach(f),le.forEach(f),He=M(E),O=w(E,"SECTION",{class:!0});var F=m(O);Ye=T(F,"Round "),Ae=T(F,r[8]),Je=T(F,` /
		`),we=w(F,"LABEL",{for:!0,class:!0});var dt=m(we);Ke=T(dt,"Total rounds"),dt.forEach(f),Xe=M(F),J=w(F,"INPUT",{id:!0,type:!0,min:!0,class:!0}),Ze=M(F),fe=w(F,"BUTTON",{class:!0});var gt=m(fe);ce.l(gt),gt.forEach(f),Qe=M(F),j&&j.l(F),F.forEach(f),Fe=M(E),ue=w(E,"SECTION",{class:!0});var Le=m(ue);me=w(Le,"TABLE",{class:!0});var pt=m(me);for(let et=0;et<S.length;et+=1)S[et].l(pt);pt.forEach(f),$e=M(Le),D&&D.l(Le),Le.forEach(f),E.forEach(f),this.h()},h(){s(t,"class","svelte-8fwnwn"),s(e,"class","svelte-8fwnwn"),s(h,"href","https://www.jstor.org/stable/10.1086/428390"),s(h,"target","_blank"),s(h,"rel","noopener noreferrer"),s(h,"class","svelte-8fwnwn"),s(o,"class","svelte-8fwnwn"),s(z,"class","svelte-8fwnwn"),s(re,"class","svelte-8fwnwn"),s(a,"class","svelte-8fwnwn"),s(ae,"class","svelte-8fwnwn"),s(K,"for","gridWidth"),s(K,"class","svelte-8fwnwn"),s(U,"id","gridWidth"),s(U,"type","number"),s(U,"max",200),s(U,"class","svelte-8fwnwn"),s($,"class","svelte-8fwnwn"),s(oe,"for","stateOptions"),s(oe,"class","svelte-8fwnwn"),s(y,"id","stateOptions"),s(y,"type","number"),s(y,"min","1"),s(y,"max",5),s(y,"class","svelte-8fwnwn"),s(x,"class","svelte-8fwnwn"),s(v,"for","actionOptionsCount"),s(v,"class","svelte-8fwnwn"),s(_,"id","actionOptionsCount"),s(_,"type","number"),s(_,"min","1"),s(_,"max",5),s(_,"class","svelte-8fwnwn"),s(g,"class","svelte-8fwnwn"),ne(ie,"margin-left","1rem"),ne(ie,"font-size","1.5rem"),s(ie,"class","svelte-8fwnwn"),s(P,"class","svelte-8fwnwn"),s(A,"class","svelte-8fwnwn"),s(we,"for","totalRounds"),s(we,"class","sr-only svelte-8fwnwn"),s(J,"id","totalRounds"),s(J,"type","number"),s(J,"min",r[8]),s(J,"class","svelte-8fwnwn"),s(fe,"class","svelte-8fwnwn"),s(O,"class","svelte-8fwnwn"),s(me,"class","svelte-8fwnwn"),s(ue,"class","svelte-8fwnwn"),s(n,"class","svelte-8fwnwn")},m(d,k){R(d,e,k),u(e,t),u(t,l),R(d,c,k),R(d,n,k),u(n,a),u(a,o),u(o,i),u(o,h),u(h,N),u(o,q),u(a,W),u(a,z),u(a,L),u(a,re),u(a,V),u(n,he),u(n,A),u(A,ae),u(ae,Ne),u(A,ve),u(A,$),u($,K),u(K,Se),u($,Ce),u($,U),ge(U,r[3]),u(A,Te),u(A,x),u(x,oe),u(oe,Ie),u(x,Me),u(x,y),ge(y,r[0]),u(A,b),u(A,g),u(g,v),u(v,H),u(g,Y),u(g,_),ge(_,r[1]),u(A,B),u(A,P),u(P,ie),de[X].m(ie,null),u(n,He),u(n,O),u(O,Ye),u(O,Ae),u(O,Je),u(O,we),u(we,Ke),u(O,Xe),u(O,J),ge(J,r[7]),u(O,Ze),u(O,fe),ce.m(fe,null),u(O,Qe),j&&j.m(O,null),u(n,Fe),u(n,ue),u(ue,me);for(let ee=0;ee<S.length;ee+=1)S[ee].m(me,null);u(ue,$e),D&&D.m(ue,null),ye=!0,xe||(lt=[se(U,"input",r[15]),se(U,"keyup",r[16]),se(y,"input",r[17]),se(y,"keyup",r[18]),se(_,"input",r[19]),se(_,"keyup",r[20]),se(J,"input",r[21]),se(J,"keyup",r[22]),se(fe,"click",r[12])],xe=!0)},p(d,k){k[0]&8&&pe(U.value)!==d[3]&&ge(U,d[3]),k[0]&1&&pe(y.value)!==d[0]&&ge(y,d[0]),k[0]&2&&pe(_.value)!==d[1]&&ge(_,d[1]);let ee=X;if(X=nt(d),X===ee?de[X].p(d,k):(ze(),Q(de[ee],1,1,()=>{de[ee]=null}),De(),Z=de[X],Z?Z.p(d,k):(Z=de[X]=st[X](d),Z.c()),G(Z,1),Z.m(ie,null)),(!ye||k[0]&256)&&tt(Ae,d[8]),(!ye||k[0]&256)&&s(J,"min",d[8]),k[0]&128&&pe(J.value)!==d[7]&&ge(J,d[7]),Pe!==(Pe=rt(d))&&(ce.d(1),ce=Pe(d),ce&&(ce.c(),ce.m(fe,null))),d[6]?j&&(j.d(1),j=null):j?j.p(d,k):(j=kt(d),j.c(),j.m(O,null)),k[0]&2608){be=d[5];let E;for(E=0;E<be.length;E+=1){const te=vt(d,be,E);S[E]?(S[E].p(te,k),G(S[E],1)):(S[E]=Nt(te),S[E].c(),G(S[E],1),S[E].m(me,null))}for(ze(),E=be.length;E<S.length;E+=1)Pt(E);De()}d[2]?D||(D=St(),D.c(),D.m(ue,null)):D&&(D.d(1),D=null)},i(d){if(!ye){G(Z);for(let k=0;k<be.length;k+=1)G(S[k]);ye=!0}},o(d){Q(Z),S=S.filter(Boolean);for(let k=0;k<S.length;k+=1)Q(S[k]);ye=!1},d(d){d&&f(e),d&&f(c),d&&f(n),de[X].d(),ce.d(),j&&j.d(),_t(S,d),D&&D.d(),xe=!1,Rt(lt)}}}function Ct(r){const e=Math.floor(Math.random()*r.length);return r[e]}function Tt(r,e,t,l,c){return c.map(a=>{let o=a[0]+r;o===-1?o=t-1:o>t-1&&(o=0);let i=a[1]+e;return i===-1?i=l-1:i>l-1&&(i=0),[o,i]})}function It(r,e){let t=r.map(l=>[l]);for(;t[0].length<e;)t=t.flatMap(l=>r.map(c=>[...l,c]));return t}function Mt(r,e){if(r.length<new Set(r).size)throw"Values in key array must be unique.";const t={};for(let l=0;l<r.length;l++)t[r[l]]=e[l];return t}function Wt(r,e){return r.flatMap(t=>e.map(l=>[t,l]))}function At(r){const e=[];for(let t=0;t<r;t++)e.push(`hsl(${360/r*t}, 70%, 50%)`);return e}function Ht(r,e,t){let l;const c=[{symbol:"\u{1F989}",label:"owl"},{symbol:"\u{1F413}",label:"rooster"},{symbol:"\u{1F424}",label:"chick"},{symbol:"\u{1F54A}",label:"dove"},{symbol:"\u{1F427}",label:"penguin"},{symbol:"\u{1F99C}",label:"parrot"},{symbol:"\u{1F985}",label:"eagle"},{symbol:"\u{1F986}",label:"duck"},{symbol:"\u{1F9A2}",label:"swan"},{symbol:"\u{1F983}",label:"turkey"},{symbol:"\u{1F9A4}",label:"dodo"},{symbol:"\u{1F9A9}",label:"flamingo"},{symbol:"\u{1F426}",label:"bluebird"},{symbol:"\u{1F98E}",label:"lizard"},{symbol:"\u{1F422}",label:"turtle"},{symbol:"\u{1F41D}",label:"bee"}];class n{constructor(b,g,v){this.strategies=Math.floor(Math.random()*v),this.coords={x:b,y:g},this.payoff=0}}class a{constructor(b,g,v,H){this.rowCount=b,this.colCount=g,this.grid=[],this.nodeList=[],this.stateOptions=v,this.actionOptions=H,this.strategies=this.generateStrategies(this.stateOptions,this.actionOptions);for(let Y=0;Y<b;Y++){const _=[];for(let B=0;B<g;B++){const P=new n(Y,B,this.strategies.length);_.push(P),this.nodeList.push(P)}this.grid.push(_)}}generateStrategies(b,g){const v=It(g,b.length),H=It(b,g.length),Y=v.map(P=>Mt(b,P)),_=H.map(P=>Mt(g,P));return Wt(Y,_)}getNeighbours(b,g,v){return v.map(_=>{let B=_[0]+b;B===-1?B=this.rowCount-1:B>this.rowCount-1&&(B=0);let P=_[1]+g;return P===-1?P=this.colCount-1:P>this.colCount-1&&(P=0),[B,P]}).map(_=>this.grid[_[0]][_[1]])}getMooreNeighbours(b,g){const v=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]];return Tt(b,g,this.rowCount,this.colCount,v).map(_=>this.grid[_[0]][_[1]])}getNextNeighbours(b,g){const v=[[-1,-1],[0,-1],[-1,0]];return Tt(b,g,this.rowCount,this.colCount,v).map(_=>this.grid[_[0]][_[1]])}generateState(){this.currentState=Ct(this.stateOptions)}playGame(b,g){const v=this.strategies[b.strategies][0][this.currentState];this.strategies[g.strategies][1][v]===this.currentState&&(b.payoff++,g.payoff++)}playRound(){this.generateState();for(let b=0;b<this.grid.length;b+=1)for(let g=0;g<this.grid[0].length;g+=1)for(let v of this.getNextNeighbours(b,g))this.playGame(this.grid[b][g],v),this.playGame(v,this.grid[b][g]);this.updateStrategies();for(let b=0;b<this.grid.length;b+=1)for(let g=0;g<this.grid[0].length;g+=1){const v=this.grid[b][g];v.payoff=0}}updateStrategies(){for(let b=0;b<this.grid.length;b+=1)for(let g=0;g<this.grid[0].length;g+=1){const v=this.grid[b][g],H=v.payoff,_=this.getMooreNeighbours(v.coords.x,v.coords.y).filter(B=>B.payoff>H);_.length>0&&(v.strategies=Ct(_).strategies)}}}function o(y){return c[y]}let i=["1","2"],h=["a","b"],N=!0,q=2,W=2,z=50,L=new a(z,z,i,h),re=L.grid,V,he=50,A=0;N=!1;let ae=At(L.strategies.length);function Ne(){A>=he?(clearInterval(V),t(6,V=null)):(t(8,A++,A),L.playRound(),t(5,re=L.grid))}function ve(){V?(clearInterval(V),t(6,V=null)):t(6,V=window.setInterval(Ne,200))}function $(){V&&(clearInterval(V),t(6,V=null)),t(4,L=new a(z,z,i,h)),t(5,re=L.grid)}function K(){t(2,N=!0),console.log(N);const y=[],b=[];for(let g=0;g<q;g++)y.push(g);for(let g=0;g<W;g++)b.push(g);i=y,h=b,t(4,L=new a(z,z,i,h)),t(5,re=L.grid),t(9,ae=At(L.strategies.length)),console.log("Done!"),console.log(L.strategies),t(2,N=!1)}function Se(){z=pe(this.value),t(3,z)}const Ce=y=>y.key==="Enter"&&K();function U(){q=pe(this.value),t(0,q)}const Te=y=>y.key==="Enter"&&K();function x(){W=pe(this.value),t(1,W)}const oe=y=>y.key==="Enter"&&K();function Ie(){he=pe(this.value),t(7,he)}const Me=y=>y.key==="Enter"&&ve();return r.$$.update=()=>{r.$$.dirty[0]&3&&t(10,l=Math.pow(W,q)*Math.pow(q,W))},[q,W,N,z,L,re,V,he,A,ae,l,o,ve,$,K,Se,Ce,U,Te,x,oe,Ie,Me]}class Jt extends wt{constructor(e){super();mt(this,e,Ht,qt,bt,{},null,[-1,-1])}}export{Jt as default};
