import{S as wt,i as mt,s as bt,e as p,t as T,c as w,a as m,g as C,d as f,b as s,f as R,H as i,h as tt,I as q,J as ke,k as M,K as Ee,n as A,L as ne,x as W,u as F,w as De,M as _t,N as re,O as pe,P as we,Q as Rt,r as ze,j as Ve,m as Ge,o as Ue,v as qe}from"../chunks/vendor-7451c793.js";function Ot(r){let e,t,l,c;return{c(){e=p("span"),t=T(r[1]),this.h()},l(n){e=w(n,"SPAN",{role:!0,"aria-label":!0,"aria-hidden":!0,class:!0});var a=m(e);t=C(a,r[1]),a.forEach(f),this.h()},h(){s(e,"role","img"),s(e,"aria-label",l=r[0]?r[0]:""),s(e,"aria-hidden",c=r[0]?"false":"true"),s(e,"class","shaker svelte-1nddn89")},m(n,a){R(n,e,a),i(e,t)},p(n,[a]){a&2&&tt(t,n[1]),a&1&&l!==(l=n[0]?n[0]:"")&&s(e,"aria-label",l),a&1&&c!==(c=n[0]?"false":"true")&&s(e,"aria-hidden",c)},i:q,o:q,d(n){n&&f(e)}}}function Bt(r,e,t){let{label:l}=e,{symbol:c}=e;return r.$$set=n=>{"label"in n&&t(0,l=n.label),"symbol"in n&&t(1,c=n.symbol)},[l,c]}class We extends wt{constructor(e){super();mt(this,e,Bt,Ot,bt,{label:0,symbol:1})}}function vt(r,e,t){const l=r.slice();return l[29]=e[t],l}function yt(r,e,t){const l=r.slice();return l[32]=e[t],l}function jt(r){let e,t,l,c,n,a,o,h;return e=new We({props:{symbol:"\u{1F62C}",label:"grimace"}}),{c(){Ve(e.$$.fragment),t=M(),l=p("span"),c=T(`...okay that's probably about the limit of what we can handle for now, 
						we're already at `),n=p("strong"),a=T(r[10]),o=T(" unique strategies!"),this.h()},l(u){Ge(e.$$.fragment,u),t=A(u),l=w(u,"SPAN",{style:!0,class:!0});var _=m(l);c=C(_,`...okay that's probably about the limit of what we can handle for now, 
						we're already at `),n=w(_,"STRONG",{class:!0});var O=m(n);a=C(O,r[10]),O.forEach(f),o=C(_," unique strategies!"),_.forEach(f),this.h()},h(){s(n,"class","svelte-8fwnwn"),re(l,"font-size","1rem"),s(l,"class","svelte-8fwnwn")},m(u,_){Ue(e,u,_),R(u,t,_),R(u,l,_),i(l,c),i(l,n),i(n,a),i(l,o),h=!0},p(u,_){(!h||_[0]&1024)&&tt(a,u[10])},i(u){h||(W(e.$$.fragment,u),h=!0)},o(u){F(e.$$.fragment,u),h=!1},d(u){qe(e,u),u&&f(t),u&&f(l)}}}function Lt(r){let e,t;return e=new We({props:{symbol:"\u{1F914}",label:"thinking face"}}),{c(){Ve(e.$$.fragment)},l(l){Ge(e.$$.fragment,l)},m(l,c){Ue(e,l,c),t=!0},p:q,i(l){t||(W(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){qe(e,l)}}}function Dt(r){let e,t;return e=new We({props:{symbol:"\u{1F600}",label:"smile"}}),{c(){Ve(e.$$.fragment)},l(l){Ge(e.$$.fragment,l)},m(l,c){Ue(e,l,c),t=!0},p:q,i(l){t||(W(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){qe(e,l)}}}function zt(r){return{c:q,l:q,m:q,p:q,i:q,o:q,d:q}}function Vt(r){let e,t,l,c,n;return{c(){e=ke("svg"),t=ke("path"),l=M(),c=p("span"),n=T("Pause"),this.h()},l(a){e=Ee(a,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var o=m(e);t=Ee(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0,class:!0}),m(t).forEach(f),o.forEach(f),l=A(a),c=w(a,"SPAN",{class:!0});var h=m(c);n=C(h,"Pause"),h.forEach(f),this.h()},h(){s(t,"fill-rule","evenodd"),s(t,"d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z"),s(t,"clip-rule","evenodd"),s(t,"class","svelte-8fwnwn"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"class","button-icon svelte-8fwnwn"),s(e,"viewBox","0 0 20 20"),s(e,"fill","currentColor"),s(c,"class","sr-only svelte-8fwnwn")},m(a,o){R(a,e,o),i(e,t),R(a,l,o),R(a,c,o),i(c,n)},d(a){a&&f(e),a&&f(l),a&&f(c)}}}function Gt(r){let e,t,l,c,n;return{c(){e=ke("svg"),t=ke("path"),l=M(),c=p("span"),n=T("Play"),this.h()},l(a){e=Ee(a,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var o=m(e);t=Ee(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0,class:!0}),m(t).forEach(f),o.forEach(f),l=A(a),c=w(a,"SPAN",{class:!0});var h=m(c);n=C(h,"Play"),h.forEach(f),this.h()},h(){s(t,"fill-rule","evenodd"),s(t,"d","M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"),s(t,"clip-rule","evenodd"),s(t,"class","svelte-8fwnwn"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"class","button-icon svelte-8fwnwn"),s(e,"viewBox","0 0 20 20"),s(e,"fill","currentColor"),s(c,"class","sr-only svelte-8fwnwn")},m(a,o){R(a,e,o),i(e,t),R(a,l,o),R(a,c,o),i(c,n)},d(a){a&&f(e),a&&f(l),a&&f(c)}}}function kt(r){let e,t,l,c,n,a,o,h;return{c(){e=p("button"),t=ke("svg"),l=ke("path"),c=M(),n=p("span"),a=T("Reset"),this.h()},l(u){e=w(u,"BUTTON",{class:!0});var _=m(e);t=Ee(_,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var O=m(t);l=Ee(O,"path",{"fill-rule":!0,d:!0,"clip-rule":!0,class:!0}),m(l).forEach(f),O.forEach(f),c=A(_),n=w(_,"SPAN",{class:!0});var H=m(n);a=C(H,"Reset"),H.forEach(f),_.forEach(f),this.h()},h(){s(l,"fill-rule","evenodd"),s(l,"d","M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"),s(l,"clip-rule","evenodd"),s(l,"class","svelte-8fwnwn"),s(t,"xmlns","http://www.w3.org/2000/svg"),s(t,"class","button-icon svelte-8fwnwn"),s(t,"viewBox","0 0 20 20"),s(t,"fill","currentColor"),s(n,"class","sr-only svelte-8fwnwn"),s(e,"class","svelte-8fwnwn")},m(u,_){R(u,e,_),i(e,t),i(t,l),i(e,c),i(e,n),i(n,a),o||(h=ne(e,"click",r[13]),o=!0)},p:q,d(u){u&&f(e),o=!1,h()}}}function Ut(r){let e;return{c(){e=p("div"),this.h()},l(t){e=w(t,"DIV",{style:!0,class:!0}),m(e).forEach(f),this.h()},h(){re(e,"width","100%"),re(e,"height","100%"),re(e,"background-color",r[9][r[32].strategies]),re(e,"opacity","0.5"),re(e,"border-radius","50%"),re(e,"padding-bottom","100%"),s(e,"class","svelte-8fwnwn")},m(t,l){R(t,e,l)},p(t,l){l[0]&544&&re(e,"background-color",t[9][t[32].strategies])},i:q,o:q,d(t){t&&f(e)}}}function qt(r){let e,t;return e=new We({props:{symbol:r[11](r[32].strategies).symbol,label:r[11](r[32].strategies).label}}),{c(){Ve(e.$$.fragment)},l(l){Ge(e.$$.fragment,l)},m(l,c){Ue(e,l,c),t=!0},p(l,c){const n={};c[0]&32&&(n.symbol=l[11](l[32].strategies).symbol),c[0]&32&&(n.label=l[11](l[32].strategies).label),e.$set(n)},i(l){t||(W(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){qe(e,l)}}}function Et(r){let e,t,l,c;const n=[qt,Ut],a=[];function o(h,u){return h[4].strategies.length<=16?0:1}return t=o(r),l=a[t]=n[t](r),{c(){e=p("td"),l.c(),this.h()},l(h){e=w(h,"TD",{class:!0});var u=m(e);l.l(u),u.forEach(f),this.h()},h(){s(e,"class","svelte-8fwnwn")},m(h,u){R(h,e,u),a[t].m(e,null),c=!0},p(h,u){let _=t;t=o(h),t===_?a[t].p(h,u):(ze(),F(a[_],1,1,()=>{a[_]=null}),De(),l=a[t],l?l.p(h,u):(l=a[t]=n[t](h),l.c()),W(l,1),l.m(e,null))},i(h){c||(W(l),c=!0)},o(h){F(l),c=!1},d(h){h&&f(e),a[t].d()}}}function Nt(r){let e,t,l,c=r[29],n=[];for(let o=0;o<c.length;o+=1)n[o]=Et(yt(r,c,o));const a=o=>F(n[o],1,1,()=>{n[o]=null});return{c(){e=p("tr");for(let o=0;o<n.length;o+=1)n[o].c();t=M(),this.h()},l(o){e=w(o,"TR",{class:!0});var h=m(e);for(let u=0;u<n.length;u+=1)n[u].l(h);t=A(h),h.forEach(f),this.h()},h(){s(e,"class","svelte-8fwnwn")},m(o,h){R(o,e,h);for(let u=0;u<n.length;u+=1)n[u].m(e,null);i(e,t),l=!0},p(o,h){if(h[0]&2608){c=o[29];let u;for(u=0;u<c.length;u+=1){const _=yt(o,c,u);n[u]?(n[u].p(_,h),W(n[u],1)):(n[u]=Et(_),n[u].c(),W(n[u],1),n[u].m(e,t))}for(ze(),u=c.length;u<n.length;u+=1)a(u);De()}},i(o){if(!l){for(let h=0;h<c.length;h+=1)W(n[h]);l=!0}},o(o){n=n.filter(Boolean);for(let h=0;h<n.length;h+=1)F(n[h]);l=!1},d(o){o&&f(e),_t(n,o)}}}function St(r){let e,t,l,c,n;return{c(){e=p("div"),t=p("div"),l=p("div"),c=p("div"),n=p("div"),this.h()},l(a){e=w(a,"DIV",{class:!0});var o=m(e);t=w(o,"DIV",{class:!0}),m(t).forEach(f),l=w(o,"DIV",{class:!0}),m(l).forEach(f),c=w(o,"DIV",{class:!0}),m(c).forEach(f),n=w(o,"DIV",{class:!0}),m(n).forEach(f),o.forEach(f),this.h()},h(){s(t,"class","svelte-8fwnwn"),s(l,"class","svelte-8fwnwn"),s(c,"class","svelte-8fwnwn"),s(n,"class","svelte-8fwnwn"),s(e,"class","lds-ring svelte-8fwnwn")},m(a,o){R(a,e,o),i(e,t),i(e,l),i(e,c),i(e,n)},d(a){a&&f(e)}}}function Wt(r){let e,t,l,c,n,a,o,h,u,_,O,H,V,D,ae,G,fe,I,oe,Ne,ve,x,X,Se,Te,U,Ce,ee,ie,Ie,Me,k,b,g,y,Y,J,v,B,P,ue,Z,Q,He,j,Ye,Ae,Je,me,Ke,Xe,K,Ze,de,Qe,Fe,ce,be,$e,ye,xe,lt;const st=[zt,Dt,Lt,jt],ge=[];function nt(d,E){return d[10]<=16?0:d[10]<=3e4?1:d[10]<=6e4?2:3}Z=nt(r),Q=ge[Z]=st[Z](r);function rt(d,E){return d[6]?Vt:Gt}let Pe=rt(r),he=Pe(r),L=!r[6]&&kt(r),_e=r[5],S=[];for(let d=0;d<_e.length;d+=1)S[d]=Nt(vt(r,_e,d));const Pt=d=>F(S[d],1,1,()=>{S[d]=null});let z=r[2]&&St();return{c(){e=p("header"),t=p("h1"),l=T("Signal learning on a network"),c=M(),n=p("main"),a=p("details"),o=p("summary"),h=T(`Modelled after Kevin J. S. Zollman (2005)
			`),u=p("a"),_=T("Talking to Neighbors: The Evolution of Regional Meaning"),O=T("."),H=T(`
		The table below illustrates the evolution of signalling strategies in a network.
		`),V=p("br"),D=T(`
		The classic Lewis signalling game has two players. One can see some state of the world (e.g. a bird
		who sees a predator) and can send a signal (e.g. a warning call). The other can hear the call and
		take action. Both of the parties 'win' if the action is appropriate to the state of the world. Imagine
		there are two kinds of predator -- a hawk and a cat -- and you want to know whether to hide low or
		high. Different calls could tell you which kind of predator is coming, but how can you match a given
		call to a given kind of predator?
		`),ae=p("br"),G=T(`
		If you have two kinds of call, either could mean 'high' or 'low' equally well. The challenge is to
		make sure that both parties know which is which. In this simulation, each player starts with a random
		strategy for sending and receiving signals. In each round, each player plays each of their neighbours
		twice, once as 'sender' and once as 'receiver'. At the end of the round, each player looks at their
		immediate neighbours and employs a very simple learning rule: they copy the most successful neighbour's
		strategy. There are 16 possible strategies to start with, but only two which reliably allow coordination.
		When a pocket of players adopts one of these strategies, they will do well by being able to 'talk'
		to each other, and their neighbours will copy from their success. With time, we tend to see a few
		clusters forming with their own 'dialects'.`),fe=M(),I=p("details"),oe=p("summary"),Ne=T("Settings"),ve=M(),x=p("p"),X=p("label"),Se=T("Grid width:"),Te=M(),U=p("input"),Ce=M(),ee=p("p"),ie=p("label"),Ie=T("Number of state-types:"),Me=M(),k=p("input"),b=M(),g=p("p"),y=p("label"),Y=T("Number of action-types:"),J=M(),v=p("input"),B=M(),P=p("p"),ue=p("span"),Q.c(),He=M(),j=p("section"),Ye=T("Round "),Ae=T(r[8]),Je=T(` /
		`),me=p("label"),Ke=T("Total rounds"),Xe=M(),K=p("input"),Ze=M(),de=p("button"),he.c(),Qe=M(),L&&L.c(),Fe=M(),ce=p("section"),be=p("table");for(let d=0;d<S.length;d+=1)S[d].c();$e=M(),z&&z.c(),this.h()},l(d){e=w(d,"HEADER",{class:!0});var E=m(e);t=w(E,"H1",{class:!0});var te=m(t);l=C(te,"Signal learning on a network"),te.forEach(f),E.forEach(f),c=A(d),n=w(d,"MAIN",{class:!0});var N=m(n);a=w(N,"DETAILS",{class:!0});var le=m(a);o=w(le,"SUMMARY",{class:!0});var Re=m(o);h=C(Re,`Modelled after Kevin J. S. Zollman (2005)
			`),u=w(Re,"A",{href:!0,target:!0,rel:!0,class:!0});var at=m(u);_=C(at,"Talking to Neighbors: The Evolution of Regional Meaning"),at.forEach(f),O=C(Re,"."),Re.forEach(f),H=C(le,`
		The table below illustrates the evolution of signalling strategies in a network.
		`),V=w(le,"BR",{class:!0}),D=C(le,`
		The classic Lewis signalling game has two players. One can see some state of the world (e.g. a bird
		who sees a predator) and can send a signal (e.g. a warning call). The other can hear the call and
		take action. Both of the parties 'win' if the action is appropriate to the state of the world. Imagine
		there are two kinds of predator -- a hawk and a cat -- and you want to know whether to hide low or
		high. Different calls could tell you which kind of predator is coming, but how can you match a given
		call to a given kind of predator?
		`),ae=w(le,"BR",{class:!0}),G=C(le,`
		If you have two kinds of call, either could mean 'high' or 'low' equally well. The challenge is to
		make sure that both parties know which is which. In this simulation, each player starts with a random
		strategy for sending and receiving signals. In each round, each player plays each of their neighbours
		twice, once as 'sender' and once as 'receiver'. At the end of the round, each player looks at their
		immediate neighbours and employs a very simple learning rule: they copy the most successful neighbour's
		strategy. There are 16 possible strategies to start with, but only two which reliably allow coordination.
		When a pocket of players adopts one of these strategies, they will do well by being able to 'talk'
		to each other, and their neighbours will copy from their success. With time, we tend to see a few
		clusters forming with their own 'dialects'.`),le.forEach(f),fe=A(N),I=w(N,"DETAILS",{class:!0});var se=m(I);oe=w(se,"SUMMARY",{class:!0});var ot=m(oe);Ne=C(ot,"Settings"),ot.forEach(f),ve=A(se),x=w(se,"P",{class:!0});var Oe=m(x);X=w(Oe,"LABEL",{for:!0,class:!0});var it=m(X);Se=C(it,"Grid width:"),it.forEach(f),Te=A(Oe),U=w(Oe,"INPUT",{id:!0,type:!0,max:!0,class:!0}),Oe.forEach(f),Ce=A(se),ee=w(se,"P",{class:!0});var Be=m(ee);ie=w(Be,"LABEL",{for:!0,class:!0});var ut=m(ie);Ie=C(ut,"Number of state-types:"),ut.forEach(f),Me=A(Be),k=w(Be,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),Be.forEach(f),b=A(se),g=w(se,"P",{class:!0});var je=m(g);y=w(je,"LABEL",{for:!0,class:!0});var ct=m(y);Y=C(ct,"Number of action-types:"),ct.forEach(f),J=A(je),v=w(je,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),je.forEach(f),B=A(se),P=w(se,"P",{class:!0});var ht=m(P);ue=w(ht,"SPAN",{style:!0,class:!0});var ft=m(ue);Q.l(ft),ft.forEach(f),ht.forEach(f),se.forEach(f),He=A(N),j=w(N,"SECTION",{class:!0});var $=m(j);Ye=C($,"Round "),Ae=C($,r[8]),Je=C($,` /
		`),me=w($,"LABEL",{for:!0,class:!0});var dt=m(me);Ke=C(dt,"Total rounds"),dt.forEach(f),Xe=A($),K=w($,"INPUT",{id:!0,type:!0,min:!0,class:!0}),Ze=A($),de=w($,"BUTTON",{class:!0});var gt=m(de);he.l(gt),gt.forEach(f),Qe=A($),L&&L.l($),$.forEach(f),Fe=A(N),ce=w(N,"SECTION",{class:!0});var Le=m(ce);be=w(Le,"TABLE",{class:!0});var pt=m(be);for(let et=0;et<S.length;et+=1)S[et].l(pt);pt.forEach(f),$e=A(Le),z&&z.l(Le),Le.forEach(f),N.forEach(f),this.h()},h(){s(t,"class","svelte-8fwnwn"),s(e,"class","svelte-8fwnwn"),s(u,"href","https://www.jstor.org/stable/10.1086/428390"),s(u,"target","_blank"),s(u,"rel","noopener noreferrer"),s(u,"class","svelte-8fwnwn"),s(o,"class","svelte-8fwnwn"),s(V,"class","svelte-8fwnwn"),s(ae,"class","svelte-8fwnwn"),s(a,"class","svelte-8fwnwn"),s(oe,"class","svelte-8fwnwn"),s(X,"for","gridWidth"),s(X,"class","svelte-8fwnwn"),s(U,"id","gridWidth"),s(U,"type","number"),s(U,"max",200),s(U,"class","svelte-8fwnwn"),s(x,"class","svelte-8fwnwn"),s(ie,"for","stateOptions"),s(ie,"class","svelte-8fwnwn"),s(k,"id","stateOptions"),s(k,"type","number"),s(k,"min","1"),s(k,"max",5),s(k,"class","svelte-8fwnwn"),s(ee,"class","svelte-8fwnwn"),s(y,"for","actionOptionsCount"),s(y,"class","svelte-8fwnwn"),s(v,"id","actionOptionsCount"),s(v,"type","number"),s(v,"min","1"),s(v,"max",5),s(v,"class","svelte-8fwnwn"),s(g,"class","svelte-8fwnwn"),re(ue,"margin-left","1rem"),re(ue,"font-size","1.5rem"),s(ue,"class","svelte-8fwnwn"),s(P,"class","svelte-8fwnwn"),s(I,"class","svelte-8fwnwn"),s(me,"for","totalRounds"),s(me,"class","sr-only svelte-8fwnwn"),s(K,"id","totalRounds"),s(K,"type","number"),s(K,"min",r[8]),s(K,"class","svelte-8fwnwn"),s(de,"class","svelte-8fwnwn"),s(j,"class","svelte-8fwnwn"),s(be,"class","svelte-8fwnwn"),s(ce,"class","svelte-8fwnwn"),s(n,"class","svelte-8fwnwn")},m(d,E){R(d,e,E),i(e,t),i(t,l),R(d,c,E),R(d,n,E),i(n,a),i(a,o),i(o,h),i(o,u),i(u,_),i(o,O),i(a,H),i(a,V),i(a,D),i(a,ae),i(a,G),i(n,fe),i(n,I),i(I,oe),i(oe,Ne),i(I,ve),i(I,x),i(x,X),i(X,Se),i(x,Te),i(x,U),pe(U,r[3]),i(I,Ce),i(I,ee),i(ee,ie),i(ie,Ie),i(ee,Me),i(ee,k),pe(k,r[0]),i(I,b),i(I,g),i(g,y),i(y,Y),i(g,J),i(g,v),pe(v,r[1]),i(I,B),i(I,P),i(P,ue),ge[Z].m(ue,null),i(n,He),i(n,j),i(j,Ye),i(j,Ae),i(j,Je),i(j,me),i(me,Ke),i(j,Xe),i(j,K),pe(K,r[7]),i(j,Ze),i(j,de),he.m(de,null),i(j,Qe),L&&L.m(j,null),i(n,Fe),i(n,ce),i(ce,be);for(let te=0;te<S.length;te+=1)S[te].m(be,null);i(ce,$e),z&&z.m(ce,null),ye=!0,xe||(lt=[ne(U,"input",r[15]),ne(U,"keyup",r[16]),ne(k,"input",r[17]),ne(k,"keyup",r[18]),ne(v,"input",r[19]),ne(v,"keyup",r[20]),ne(K,"input",r[21]),ne(K,"keyup",r[22]),ne(de,"click",r[12])],xe=!0)},p(d,E){E[0]&8&&we(U.value)!==d[3]&&pe(U,d[3]),E[0]&1&&we(k.value)!==d[0]&&pe(k,d[0]),E[0]&2&&we(v.value)!==d[1]&&pe(v,d[1]);let te=Z;if(Z=nt(d),Z===te?ge[Z].p(d,E):(ze(),F(ge[te],1,1,()=>{ge[te]=null}),De(),Q=ge[Z],Q?Q.p(d,E):(Q=ge[Z]=st[Z](d),Q.c()),W(Q,1),Q.m(ue,null)),(!ye||E[0]&256)&&tt(Ae,d[8]),(!ye||E[0]&256)&&s(K,"min",d[8]),E[0]&128&&we(K.value)!==d[7]&&pe(K,d[7]),Pe!==(Pe=rt(d))&&(he.d(1),he=Pe(d),he&&(he.c(),he.m(de,null))),d[6]?L&&(L.d(1),L=null):L?L.p(d,E):(L=kt(d),L.c(),L.m(j,null)),E[0]&2608){_e=d[5];let N;for(N=0;N<_e.length;N+=1){const le=vt(d,_e,N);S[N]?(S[N].p(le,E),W(S[N],1)):(S[N]=Nt(le),S[N].c(),W(S[N],1),S[N].m(be,null))}for(ze(),N=_e.length;N<S.length;N+=1)Pt(N);De()}d[2]?z||(z=St(),z.c(),z.m(ce,null)):z&&(z.d(1),z=null)},i(d){if(!ye){W(Q);for(let E=0;E<_e.length;E+=1)W(S[E]);ye=!0}},o(d){F(Q),S=S.filter(Boolean);for(let E=0;E<S.length;E+=1)F(S[E]);ye=!1},d(d){d&&f(e),d&&f(c),d&&f(n),ge[Z].d(),he.d(),L&&L.d(),_t(S,d),z&&z.d(),xe=!1,Rt(lt)}}}function Tt(r){const e=Math.floor(Math.random()*r.length);return r[e]}function Ct(r,e,t,l,c){return c.map(a=>{let o=a[0]+r;o===-1?o=t-1:o>t-1&&(o=0);let h=a[1]+e;return h===-1?h=l-1:h>l-1&&(h=0),[o,h]})}function It(r,e){let t=r.map(l=>[l]);for(;t[0].length<e;)t=t.flatMap(l=>r.map(c=>[...l,c]));return t}function Mt(r,e){if(r.length<new Set(r).size)throw"Values in key array must be unique.";const t={};for(let l=0;l<r.length;l++)t[r[l]]=e[l];return t}function Ht(r,e){return r.flatMap(t=>e.map(l=>[t,l]))}function At(r){const e=[];for(let t=0;t<r;t++)e.push(`hsl(${360/r*t}, 70%, 50%)`);return e}function Yt(r,e,t){let l;const c=[{symbol:"\u{1F989}",label:"owl"},{symbol:"\u{1F413}",label:"rooster"},{symbol:"\u{1F424}",label:"chick"},{symbol:"\u{1F54A}",label:"dove"},{symbol:"\u{1F427}",label:"penguin"},{symbol:"\u{1F99C}",label:"parrot"},{symbol:"\u{1F985}",label:"eagle"},{symbol:"\u{1F986}",label:"duck"},{symbol:"\u{1F9A2}",label:"swan"},{symbol:"\u{1F983}",label:"turkey"},{symbol:"\u{1F9A4}",label:"dodo"},{symbol:"\u{1F9A9}",label:"flamingo"},{symbol:"\u{1F426}",label:"bluebird"},{symbol:"\u{1F98E}",label:"lizard"},{symbol:"\u{1F422}",label:"turtle"},{symbol:"\u{1F41D}",label:"bee"}];class n{constructor(b,g,y){this.strategies=Math.floor(Math.random()*y),this.coords={x:b,y:g},this.payoff=0}}class a{constructor(b,g,y,Y){this.rowCount=b,this.colCount=g,this.grid=[],this.nodeList=[],this.stateOptions=y,this.actionOptions=Y,this.strategies=this.generateStrategies(this.stateOptions,this.actionOptions);for(let J=0;J<b;J++){const v=[];for(let B=0;B<g;B++){const P=new n(J,B,this.strategies.length);v.push(P),this.nodeList.push(P)}this.grid.push(v)}}generateStrategies(b,g){const y=It(g,b.length),Y=It(b,g.length),J=y.map(P=>Mt(b,P)),v=Y.map(P=>Mt(g,P));return Ht(J,v)}getNeighbours(b,g,y){return y.map(v=>{let B=v[0]+b;B===-1?B=this.rowCount-1:B>this.rowCount-1&&(B=0);let P=v[1]+g;return P===-1?P=this.colCount-1:P>this.colCount-1&&(P=0),[B,P]}).map(v=>this.grid[v[0]][v[1]])}getMooreNeighbours(b,g){const y=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]];return Ct(b,g,this.rowCount,this.colCount,y).map(v=>this.grid[v[0]][v[1]])}getNextNeighbours(b,g){const y=[[-1,-1],[0,-1],[-1,0]];return Ct(b,g,this.rowCount,this.colCount,y).map(v=>this.grid[v[0]][v[1]])}generateState(){this.currentState=Tt(this.stateOptions)}playGame(b,g){const y=this.strategies[b.strategies][0][this.currentState];this.strategies[g.strategies][1][y]===this.currentState&&(b.payoff++,g.payoff++)}playRound(){this.generateState();for(let b=0;b<this.grid.length;b+=1)for(let g=0;g<this.grid[0].length;g+=1)for(let y of this.getNextNeighbours(b,g))this.playGame(this.grid[b][g],y),this.playGame(y,this.grid[b][g]);this.updateStrategies();for(let b=0;b<this.grid.length;b+=1)for(let g=0;g<this.grid[0].length;g+=1){const y=this.grid[b][g];y.payoff=0}}updateStrategies(){for(let b=0;b<this.grid.length;b+=1)for(let g=0;g<this.grid[0].length;g+=1){const y=this.grid[b][g],Y=y.payoff,v=this.getMooreNeighbours(y.coords.x,y.coords.y).filter(B=>B.payoff>Y);v.length>0&&(y.strategies=Tt(v).strategies)}}}function o(k){return c[k]}let h=["1","2"],u=["a","b"],_=!0,O=2,H=2,V=50,D=new a(V,V,h,u),ae=D.grid,G,fe=50,I=0;_=!1;let oe=At(D.strategies.length);function Ne(){I>=fe?(clearInterval(G),t(6,G=null)):(t(8,I++,I),D.playRound(),t(5,ae=D.grid))}function ve(){G?(clearInterval(G),t(6,G=null)):t(6,G=window.setInterval(Ne,200))}function x(){G&&(clearInterval(G),t(6,G=null)),t(8,I=0),t(4,D=new a(V,V,h,u)),t(5,ae=D.grid)}function X(){t(2,_=!0),console.log(_);const k=[],b=[];for(let g=0;g<O;g++)k.push(g);for(let g=0;g<H;g++)b.push(g);h=k,u=b,t(4,D=new a(V,V,h,u)),t(5,ae=D.grid),t(9,oe=At(D.strategies.length)),console.log("Done!"),console.log(D.strategies),t(2,_=!1)}function Se(){V=we(this.value),t(3,V)}const Te=k=>k.key==="Enter"&&X();function U(){O=we(this.value),t(0,O)}const Ce=k=>k.key==="Enter"&&X();function ee(){H=we(this.value),t(1,H)}const ie=k=>k.key==="Enter"&&X();function Ie(){fe=we(this.value),t(7,fe)}const Me=k=>k.key==="Enter"&&ve();return r.$$.update=()=>{r.$$.dirty[0]&3&&t(10,l=Math.pow(H,O)*Math.pow(O,H))},[O,H,_,V,D,ae,G,fe,I,oe,l,o,ve,x,X,Se,Te,U,Ce,ee,ie,Ie,Me]}class Kt extends wt{constructor(e){super();mt(this,e,Yt,Wt,bt,{},null,[-1,-1])}}export{Kt as default};
