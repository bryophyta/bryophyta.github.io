<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />
        <meta name="description" content="A web development portfolio page." />
        <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@400;600&display=swap" rel="stylesheet">
        <link href="style.css" rel="stylesheet">
        <link href="animations.css" rel="stylesheet">
        <!-- the envelope icon used on this page is from Zondicons: https://www.zondicons.com/ -->
        <title>Portfolio</title>
    </head>
    <style>

    </style>
    <body>
        <header class="page-header">
            <h1 class="name">Pete Faulconbridge</h1>
        </header>
        <main class="main-content">
            <h2 class="main-content__title js-content-top">Current Portfolio Projects</h2>
            <div class="address">peter.faulconbridge@gmail.com</div>
            <div class="contact-icon contact-icon--sticky">
               <button class="contact-icon__button" aria-labelledby=" button-label"> 
                    <span id="button-label" hidden>View contact information</span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="contact-icon__icon" viewBox="0 0 20 20"><path d="M18 2a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4c0-1.1.9-2 2-2h16zm-4.37 9.1L20 16v-2l-5.12-3.9L20 6V4l-10 8L0 4v2l5.12 4.1L0 14v2l6.37-4.9L10 14l3.63-2.9z"/></svg>
                </button>
            </div>
            <dl class="projects-list">
                <dt>
                    <a href="f-r-demo/index.html" target="_blank" rel="noopener"
                        >Fruchterman-Reingold Demo</a
                    >
                </dt>
                <dd>
                    <ul class="projects-list__tags-list">
                        <li class="js-pulse js" data-type="js">JavaScript</li>
                        <li class="js-pulse ts" data-type="ts">TypeScript</li>
                        <li class="js-pulse rd" data-type="rd">Responsive Design</li>
                    </ul>
                    <p>
                        A webpage demonstrating and briefly describing the
                        Fruchterman-Reingold algorithm for placing nodes on a
                        network graph.
                    </p>
                </dd>
                <dt>
                    <a
                        href="https://www.peterfaulconbridge.com"
                        target="_blank"
                        rel="noopener"
                        >Academic Profile Site</a
                    >
                </dt>
                <dd>
                    <ul class="projects-list__tags-list">
                        <li class="js-pulse rd" data-type="rd">Responsive Design</li>
                        <li class="js-pulse temp" data-type="temp">
                            Templating (Liquid, Jekyll)
                        </li>
                    </ul>
                    <p>
                        A site I made during my PhD to display information about
                        my work in Philosophy.
                    </p>
                </dd>
                <dt>
                    <a
                        href="influence-graph/philosophers.html"
                        target="_blank"
                        rel="noopener"
                        >Network Analysis Page</a
                    >
                    (Work in Progress)
                </dt>
                <dd>
                    <ul class="projects-list__tags-list">
                        <li class="js-pulse apis" data-type="apis">APIs</li>
                        <li class="js-pulse data" data-type="data">Data Processing</li>
                        <li class="js-pulse js" data-type="js">JavaScript</li>
                        <li class="js-pulse ts" data-type="ts">TypeScript</li>
                    </ul>
                    <p>
                        In-progress webpage which reconstructs, displays, and
                        analyses networks from data pulled from WikiData.
                    </p>
                </dd>
                <dt>
                    <a
                        href="https://www.stmartinsvineyard.co.uk"
                        target="_blank"
                        rel="noopener"
                        >St Martin's Vineyard</a
                    >
                </dt>
                <dd>
                    <ul class="projects-list__tags-list">
                        <li class="js-pulse cms" data-type="cms">CMS</li>
                        <li class="js-pulse rd" data-type="rd">Responsive Design</li>
                    </ul>
                    <p>
                        A website I made for a small vineyard business. The site
                        itself is made using a site-builder (Wix), so it does
                        not display much coding. I was involved from initial
                        consultation around structure, content, etc., through to
                        some graphic design elements.
                    </p>
                    <p>
                        (The business owners are responsible for on-going
                        maintenance, so I have not been involved in all details
                        of the site as it stands today.)
                    </p>
                </dd>
            </dl>
        </main>
        <footer></footer>
    </body>
    <script>
        const root = document.querySelector('html');
        const header = document.querySelector('.page-header');
        const mainContent = document.querySelector('.main-content');
        const contactButton = document.querySelector('.contact-icon__button');
            const scrollMargin = contactButton.getBoundingClientRect().top - 15;
        const addressLabel = document.querySelector('.address');
        const contentTop = document.querySelector('.js-content-top');
        const pulseLabels = document.querySelectorAll('.js-pulse');
        const pulseLabelsDictionary = {};
        for (let label of pulseLabels) {
            const labelType = label.dataset.type;
            if (Object.keys(pulseLabelsDictionary).includes(labelType)) {
                pulseLabelsDictionary[labelType].push(label);
            } else {
                pulseLabelsDictionary[labelType] = [label];
            }
        }

        let scrolledActive = false;

        root.classList.add('no-focus-outline');
        window.addEventListener('keyup', removeOutlineBlockOnTab);
        header.classList.add('page-header--sticky');


        function removeOutlineBlockOnTab(e) {
            if (e.key === 'Tab') {
                root.classList.remove('no-focus-outline');
            }
        }


        function toggleHeader() {
            const scrolled = window.scrollY;
            // (header.clientHeight) + contentTop.clientHeight;
            if (scrolled < 10 && scrolledActive) {
                root.classList.remove('scroll-active');
                header.classList.remove('page-header--sticky--scrolled');
                scrolledActive = false;
            }
            if (scrolled > scrollMargin && !scrolledActive) {
                root.classList.add('scroll-active');
                header.classList.add('page-header--sticky--scrolled');
                scrolledActive = true;
            }
        }

        function toggleContact() {
            addressLabel.classList.toggle('address--sticky');
        }

        contactButton.addEventListener('click', toggleContact);

        // As this is a scroll event, I initially thought I should debounce or throttle it. But because a) debouncing interferes with the animation, b) this function is not especially costly unless the conditions are triggered, and c) it's relatively unlikely that a user will repeatedly and quickly     alternate between the two trigger points, it seemed as though it would be okay to not debounce or throttle the function on this page. I'm very open to feedback on this train of thought, though!
        window.addEventListener('scroll', toggleHeader);

        function pulseSame(e) {
            const labelType = this.dataset.type;
            const labelsOfType = pulseLabelsDictionary[labelType];
            labelsOfType.forEach((label) => {
                label.classList.add('pulse');
                if (label !== this) {
                    label.classList.add('pulse-delay-reverse');
                }
            });
        }

        function removePulse(e) {
            if (this.classList.contains('pulse')) {
                this.classList.remove('pulse');
            }
            if (this.classList.contains('pulse-delay-reverse')) {
                this.classList.remove('pulse-delay-reverse');
            }
        }

        pulseLabels.forEach((item) => item.addEventListener('mouseover', pulseSame));
        pulseLabels.forEach((item) => item.addEventListener('animationend', removePulse));


    </script>
</html>
