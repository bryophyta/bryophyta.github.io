<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
        />
        <meta name="description" content="A web development portfolio page." />
        <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@400;600&display=swap" rel="stylesheet">
        <link href="animations.css" rel="stylesheet">
        <title>Portfolio</title>
    </head>
    <style>
        body {
            color: hsl(240, 14%, 10%);
            max-width: 900px;
            padding: 0;
            margin-top: 0;
            margin-left: 0;
            margin-bottom: 3rem;
            margin-right: 0;
            font-size: 14px;
            font-family: 'Mulish', sans-serif;        
        }

        header, main {
            padding-top: 0;
            padding-left: 1rem;
            padding-bottom: 0;
            padding-right: 1rem;
            margin: 0;
        }

        h1, h2 {
            font-size: 2rem;
            margin-left: 1rem;
        }

        a {
            color: currentColor;
        }

        dl {
            margin-left: 1rem;
            margin-right: 1rem;
        }

        dt {
            margin-top: 1.5rem;
            padding-top: 2.5rem;
            border-top: 1px solid lightgray;
            font-size: 1.3rem;
        }

        dt:nth-of-type(1) {
            border-top: 0;
        }

        dd {
            margin-left: 0;
        }

        ul {
            margin-top: 0.5rem;
            padding-left: 0;
        }

        li {
            display: inline-block;
            margin-top: 0.3rem;
            padding-top: 0.4rem;
            padding-bottom: 0.4rem;
            padding-left: 0.6rem;
            padding-right: 0.6rem;
            border-radius: 0.2rem;
            box-shadow: 2px 2px 4px lightgray;
            font-family: sans-serif;
            font-size: 0.8rem;
        }

        .page-header {
            background-color: #fff;
            width: 100%;
            border-bottom: 1px solid rgba(211, 211, 211, 0%);
        }

        .page-header--sticky {
        }

        .page-header--sticky--scrolled {
        }  
        .page-header--sticky--scrolled h1 {
        }

        .page-header--sticky + .main-content {
        }

        .js-content-top {}

        .js-pulse {}

        .name {
            transition: 0.5s all;
        }

        .address {
            margin-right: 0.5rem;
            text-align: right;
            font-family: monospace;
        }

        .js {
            background-color: #c1acd3;
        }

        .ts {
            background-color: #b0ddd6;
        }

        .rd {
            background-color: #b9db9f;
        }

        .temp {
            background-color: #f29ac0;
        }

        .apis {
            background-color: #feddb4;
        }

        .data {
            background-color: #9ddaec;
        }

        @media all and (min-width: 350px) {
            body {
                font-size: 16px;
            }

            .page-header--sticky {
                z-index: 99;
                position: fixed;
                top: 0;
                left: 0;
                transition: 1s all;
            }

            .page-header--sticky--scrolled {
                color: hsl(240, 14%, 70%);
                border-bottom: 1px solid rgba(211, 211, 211, 100%);
            }

            .page-header--sticky--scrolled h1 {
                font-size: 1.8rem;
            }

            .page-header--sticky + .main-content {
                padding-top: 5rem;
            }
        }

        @media all and (min-width: 450px) {
            body {
                font-size: 18px;
            }

            h1, h2 {
                margin-left: 1.5rem;
                font-size: 2.5rem;
            }

            .name {
                margin-left: 1.5rem;
                font-size: 2.5rem;
            }

            dl {
                margin-left: 1.5rem;
                margin-right: 1.5rem;
            }

            dd {
                margin-left: 2rem;
            }
        }
    </style>
    <body>
        <header class="page-header">
            <h1 class="name">Pete Faulconbridge</h1>
            <!-- <p class="address">peter.faulconbridge@gmail.com</p> -->
        </header>
        <main class="main-content">
            <h2 class="js-content-top">Current Portfolio Projects</h2>
            <dl>
                <dt>
                    <a href="f-r-demo/index.html" target="_blank" rel="noopener"
                        >Fruchterman-Reingold Demo</a
                    >
                </dt>
                <dd>
                    <ul>
                        <li class="js-pulse js" data-type="js">JavaScript</li>
                        <li class="js-pulse ts" data-type="ts">TypeScript</li>
                        <li class="js-pulse rd" data-type="rd">Responsive Design</li>
                    </ul>
                    <p>
                        A webpage demonstrating and briefly describing the
                        Fruchterman-Reingold algorithm for placing nodes on a
                        network graph.
                    </p>
                </dd>
                <dt>
                    <a
                        href="https://www.peterfaulconbridge.com"
                        target="_blank"
                        rel="noopener"
                        >Academic Profile Site</a
                    >
                </dt>
                <dd>
                    <ul>
                        <li class="js-pulse rd" data-type="rd">Responsive Design</li>
                        <li class="js-pulse temp" data-type="temp">
                            Templating (Liquid, Jekyll)
                        </li>
                    </ul>
                    <p>
                        A site I made during my PhD to display information about
                        my work in Philosophy.
                    </p>
                </dd>
                <dt>
                    <a
                        href="influence-graph/philosophers.html"
                        target="_blank"
                        rel="noopener"
                        >Network Analysis Page</a
                    >
                    (Work in Progress)
                </dt>
                <dd>
                    <ul>
                        <li class="js-pulse apis" data-type="apis">APIs</li>
                        <li class="js-pulse data" data-type="data">Data Processing</li>
                        <li class="js-pulse js" data-type="js">JavaScript</li>
                        <li class="js-pulse ts" data-type="ts">TypeScript</li>
                    </ul>
                    <p>
                        In-progress webpage which reconstructs, displays, and
                        analyses networks from data pulled from WikiData.
                    </p>
                </dd>
                <dt>
                    <a
                        href="https://www.stmartinsvineyard.co.uk"
                        target="_blank"
                        rel="noopener"
                        >St Martin's Vineyard</a
                    >
                </dt>
                <dd>
                    <p>
                        A website I made for a small vineyard business. The site
                        itself is made using a site-builder (Wix), so it does
                        not display much coding. I was involved from initial
                        consultation around structure, content, etc., through to
                        some graphic design elements.
                    </p>
                    <p>
                        (The business owners are responsible for on-going
                        maintenance, so I have not been involved in all details
                        of the site as it stands today.)
                    </p>
                </dd>
            </dl>
        </main>
        <footer></footer>
    </body>
    <script>
        const header = document.querySelector('.page-header');
        const mainContent = document.querySelector('.main-content');
        const contentTop = document.querySelector('.js-content-top');
        const pulseLabels = document.querySelectorAll('.js-pulse');
        const pulseLabelsDictionary = {};
        for (let label of pulseLabels) {
            const labelType = label.dataset.type;
            if (Object.keys(pulseLabelsDictionary).includes(labelType)) {
                pulseLabelsDictionary[labelType].push(label);
            } else {
                pulseLabelsDictionary[labelType] = [label];
            }
        }
        console.log(pulseLabelsDictionary);

        let scrolledActive = false;

        header.classList.add('page-header--sticky');

        function toggleHeader() {
            const scrolled = window.scrollY;
            const scrollMargin = (header.clientHeight / 2) + contentTop.clientHeight;
            if (scrolled < 10 && scrolledActive) {
                header.classList.remove('page-header--sticky--scrolled');
                scrolledActive = false;
            }
            if (scrolled > scrollMargin && !scrolledActive) {
                header.classList.add('page-header--sticky--scrolled');
                scrolledActive = true;
            }
        }

        // As this is a scroll event, I initially thought I should debounce or throttle it. But because a) debouncing interferes with the animation, b) this function is not especially costly unless the conditions are triggered, and c) it's relatively unlikely that a user will repeatedly and quickly     alternate between the two trigger points, it seemed as though it would be okay to not debounce or throttle the function on this page. I'm very open to feedback on this train of thought, though!
        window.addEventListener('scroll', toggleHeader);

        function pulseSame(e) {
            const labelType = this.dataset.type;
            const labelsOfType = pulseLabelsDictionary[labelType];
            labelsOfType.forEach((label) => {
                label.classList.add('pulse');
                if (label !== this) {
                    label.classList.add('pulse-delay-reverse');
                }
            });
        }

        function removePulse(e) {
            if (this.classList.contains('pulse')) {
                this.classList.remove('pulse');
            }
            if (this.classList.contains('pulse-delay-reverse')) {
                this.classList.remove('pulse-delay-reverse');
            }
        }

        pulseLabels.forEach((item) => item.addEventListener('mouseover', pulseSame));
        pulseLabels.forEach((item) => item.addEventListener('animationend', removePulse));


    </script>
</html>
